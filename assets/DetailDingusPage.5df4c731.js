import{Q as G}from"./QPage.b3d31358.js";import{a as H,Q as J}from"./use-dark.1604e928.js";import{u as R,Q as k}from"./dingus-store.e6c08977.js";import{a as v,Q as _}from"./QItem.94b9d0d0.js";import{h as z,m as K,j as S,c as y,r as g,ar as D,l,L as r,k as U,D as o,d as t,H as b,I as w,G as V,J as d,ag as M,F as O}from"./index.fe271617.js";import{Q as W}from"./QForm.a57c5b0b.js";import{Q as X}from"./QCard.e508ffcf.js";import{C as Y}from"./ClosePopup.b14023b9.js";import{u as Z}from"./use-quasar.231e3db0.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./portal.c2b6ee92.js";const ee=z("div",{class:"q-space"});var te=K({name:"QSpace",setup(){return()=>ee}});const ae={_id:"",author:"",name:"",description:"",verified:!1},oe=V("strong",null,"Status: ",-1),ne={class:"nav-row"},le={key:0,class:"nav-button"},se={key:1,class:"nav-button"},ie={key:2,class:"nav-button"},ue={key:3,class:"nav-button"},re={class:"nav-button"},de={key:1},ce=S({__name:"DetailDingusComponent",setup(x){const c=Z(),s=R(),L=y(()=>"Delete "+a.value.name),a=y(()=>s.getSelectedDingus?s.getSelectedDingus:ae),h=y(()=>{let e=!1;return f.value!=a.value.name&&(e=!0),m.value!=a.value.description&&(e=!0),e}),p=g(!1),f=g(a.value.name),m=g(a.value.description),C=g(),Q=e=>e&&e.length>0||"This field cannot be empty";async function T(){if(await C.value.validate()){const n={_id:a.value._id,name:f.value,description:m.value,author:a.value.author,verified:a.value.verified};N(n)}}async function N(e){const n=await s.updateDingus(e);B(n)}function B(e){e.code=="success"&&c.notify({message:confirm.name+" updated successfully",color:"positive",position:"top"})}async function I(){const e=await s.setVerified(f.value);P(e)}function P(e){e.code=="success"&&c.notify({message:e.name+" has been verified",color:"positive",position:"top"})}async function $(){const e=await s.unsetVerified(a.value.name);q(e)}function q(e){e.code=="success"&&c.notify({message:e.name+" has been unverified",color:"positive",position:"top"})}async function F(){const e=await s.deleteDingus();j(e)}function j(e){e.code=="success"&&(c.notify({message:e.name+" has been deleted",color:"positive",position:"top"}),p.value=!1)}return(e,n)=>{const u=D("app-btn"),A=D("nothing-here"),E=D("app-dialog");return l(),r(O,null,[a.value._id.length>0?(l(),U(X,{key:0,class:"card"},{default:o(()=>[t(J,{class:"card-header"},{default:o(()=>[t(H,null,{default:o(()=>[b("Dingus Detail")]),_:1})]),_:1}),t(W,{ref_key:"formComponent",ref:C},{default:o(()=>[t(v,null,{default:o(()=>[t(_,null,{default:o(()=>[t(k,{id:"name",modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=i=>f.value=i),type:"text",label:"Dingus name:",rules:[Q]},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(_,null,{default:o(()=>[t(k,{id:"description",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=i=>m.value=i),type:"textarea",label:"Dingus description:",rules:[Q]},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(_,null,{default:o(()=>[oe,b(w(a.value.verified?"Verified":"Pending"),1)]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(_,null,{default:o(()=>[V("div",ne,[a.value.verified?(l(),r("div",le,[t(u,{color:"warning",label:"Unverify",full:"",onClick:$})])):d("",!0),a.value.verified?d("",!0):(l(),r("div",se,[t(u,{color:"positive",label:"Verify",full:"",onClick:I})])),h.value?(l(),r("div",ie,[t(u,{color:"primary",label:"Update",full:"",onClick:T})])):d("",!0),h.value?d("",!0):(l(),r("div",ue,[t(te)])),V("div",re,[t(u,{color:"negative",label:"Delete",full:"",onClick:n[2]||(n[2]=i=>p.value=!0)})])])]),_:1})]),_:1})]),_:1},512)]),_:1})):d("",!0),a.value._id.length<1?(l(),r("div",de,[t(A,{icon:"mdi-cancel",label:"There is no selected Dingus"})])):d("",!0),t(E,{modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=i=>p.value=i),persistent:"",label:L.value,onSubmit:F},{buttons:o(()=>[M(t(u,{color:"negative",label:"Cancel",onClick:n[3]||(n[3]=i=>p.value=!1)},null,512),[[Y]]),t(u,{type:"submit",color:"positive",label:"Delete"})]),default:o(()=>[b(" Are you sure you want to Delete "+w(a.value.name)+" ? ",1)]),_:1},8,["modelValue","label"])],64)}}}),Qe=S({__name:"DetailDingusPage",setup(x){return(c,s)=>(l(),U(G,{class:"app-page"},{default:o(()=>[t(ce)]),_:1}))}});export{Qe as default};
