import{u as M,Q as B}from"./dingus-store.432e147f.js";import{a as b,Q as k}from"./QItemSection.0bb51c2b.js";import{h as O,x as W,j as q,s as X,c as U,r as D,aB as g,l as i,H as c,k as I,m as o,f as t,B as C,t as V,q as N,p as $,u as s,C as p,ak as Y,F as Z}from"./index.e2a387ad.js";import{Q as x}from"./QForm.538002f1.js";import{C as ee}from"./ClosePopup.bfb8bde6.js";import{u as te}from"./focus-manager.e902b365.js";import{u as le}from"./vue-i18n.runtime.esm-bundler.233de6b8.js";import{u as ae}from"./app.store.27bb87ef.js";import"./use-key-composition.44ad2ba9.js";import"./portal.7eb16835.js";const oe=O("div",{class:"q-space"});var ne=W({name:"QSpace",setup(){return()=>oe}});const se={_id:"",author:"",name:"",description:"",verified:!1},ie={class:"nav-row"},ue={key:0,class:"nav-button"},re={key:1,class:"nav-button"},de={key:2,class:"nav-button"},ce={key:3,class:"nav-button"},pe={class:"nav-button"},me={key:1},fe=q({__name:"DetailDingusComponent",setup(L){const m=te(),{t:f}=le(),h=ae(),r=M(),{current_theme:n}=X(h),l=U(()=>r.getSelectedDingus?r.getSelectedDingus:se),S=U(()=>{let e=!1;return _.value!=l.value.name&&(e=!0),y.value!=l.value.description&&(e=!0),e}),v=D(!1),_=D(l.value.name),y=D(l.value.description),w=D(),Q=e=>e&&e.length>0||"This field cannot be empty";async function F(){if(await w.value.validate()){const a={_id:l.value._id,name:_.value,description:y.value,author:l.value.author,verified:l.value.verified};T(a)}}async function T(e){const a=await r.updateDingus(e);P(a)}function P(e){e.code=="success"&&m.notify({message:confirm.name+f("updated_not"),color:"positive",position:"top"})}async function R(){const e=await r.setVerified(_.value);j(e)}function j(e){e.code=="success"&&m.notify({message:e.name+f("verified_not"),color:"positive",position:"top"})}async function z(){const e=await r.unsetVerified(l.value.name);A(e)}function A(e){e.code=="success"&&m.notify({message:e.name+f("unverified_not"),color:"positive",position:"top"})}async function E(){const e=await r.deleteDingus();H(e)}function H(e){e.code=="success"&&(m.notify({message:e.name+f("deleted_not"),color:"positive",position:"top"}),v.value=!1)}return(e,a)=>{const d=g("app-btn"),G=g("app-card"),J=g("nothing-here"),K=g("app-dialog");return i(),c(Z,null,[l.value._id.length>0?(i(),I(G,{key:0,msg:e.$t("dingus_detail")},{default:o(()=>[t(x,{ref_key:"formComponent",ref:w},{default:o(()=>[t(b,null,{default:o(()=>[t(k,null,{default:o(()=>[t(B,{id:"name",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=u=>_.value=u),type:"text",label:e.$t("dingus_name"),rules:[Q]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),t(b,null,{default:o(()=>[t(k,null,{default:o(()=>[t(B,{id:"description",modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=u=>y.value=u),type:"textarea",label:e.$t("dingus_description"),rules:[Q]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),t(b,null,{default:o(()=>[t(k,null,{default:o(()=>[C("strong",null,V(e.$t("status"))+": ",1),N(V(l.value.verified?e.$t("verified"):e.$t("pending")),1)]),_:1})]),_:1}),t(b,null,{default:o(()=>[t(k,null,{default:o(()=>[C("div",ie,[l.value.verified?(i(),c("div",ue,[t(d,{style:$({"background-color":s(n).warning,color:s(n).text}),label:e.$t("unverify"),full:"",onClick:z},null,8,["style","label"])])):p("",!0),l.value.verified?p("",!0):(i(),c("div",re,[t(d,{style:$({"background-color":s(n).positive,color:s(n).light}),label:e.$t("verify"),full:"",onClick:R},null,8,["style","label"])])),S.value?(i(),c("div",de,[t(d,{style:$({"background-color":s(n).primary,color:s(n).light}),label:e.$t("update"),full:"",onClick:F},null,8,["style","label"])])):p("",!0),S.value?p("",!0):(i(),c("div",ce,[t(ne)])),C("div",pe,[t(d,{style:$({"background-color":s(n).negative,color:s(n).light}),label:e.$t("delete"),full:"",onClick:a[2]||(a[2]=u=>v.value=!0)},null,8,["style","label"])])])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["msg"])):p("",!0),l.value._id.length<1?(i(),c("div",me,[t(J,{icon:"mdi-cancel",label:e.$t("no_dingus_selected")},null,8,["label"])])):p("",!0),t(K,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=u=>v.value=u),persistent:"",label:e.$t("delete")+" "+l.value.name,onSubmit:E},{buttons:o(()=>[Y(t(d,{color:"negative",label:e.$t("cancel"),onClick:a[3]||(a[3]=u=>v.value=!1)},null,8,["label"]),[[ee]]),t(d,{type:"submit",color:"positive",label:e.$t("delete")},null,8,["label"])]),default:o(()=>[N(V(e.$t("confirm_delete_one"))+" "+V(l.value.name)+" ? ",1)]),_:1},8,["modelValue","label"])],64)}}}),Ce=q({__name:"DetailDingusPage",setup(L){return(m,f)=>{const h=g("app-page");return i(),I(h,null,{default:o(()=>[t(fe)]),_:1})}}});export{Ce as default};
